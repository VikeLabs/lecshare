(this.webpackJsonplecshare=this.webpackJsonplecshare||[]).push([[0],{71:function(e,t,a){e.exports=a(94)},76:function(e,t,a){},77:function(e,t,a){},84:function(e,t,a){},89:function(e,t,a){},91:function(e,t,a){},92:function(e,t,a){},94:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(32),o=a.n(c),s=(a(76),a(77),a(53)),l=a(68),i=a(29),u=a(69),d=a(15),m=a(5),b=a(25),v=a(28),f=(a(84),a(26)),p=a.n(f),E=a(30);function C(){var e=Object(b.a)(["\n    query VERIFY_CODE($crsCode: String!, $clsCode: String!, $acsKey: String!) {\n        protectedClass(courseCode: $crsCode classCode: $clsCode accessKey: $acsKey) {\n            name\n        }\n    }\n"]);return C=function(){return e},e}var S=p()(C());var O=function(e){var t,a,c=Object(n.useState)(""),o=Object(m.a)(c,2),s=o[0],l=o[1],i=Object(n.useState)(""),u=Object(m.a)(i,2),d=u[0],b=u[1],f=Object(n.useState)(""),p=Object(m.a)(f,2),C=p[0],O=p[1],g=Object(n.useState)(""),h=Object(m.a)(g,2),j=h[0],N=h[1],y=Object(n.useState)(!1),T=Object(m.a)(y,2),w=T[0],k=T[1],x=Object(n.useState)(!1),$=Object(m.a)(x,2),L=$[0],K=$[1],I=Object(v.g)(),B=Object(E.a)(S,{variables:{crsCode:d,clsCode:C,acsKey:j},onCompleted:function(){if(M)K(!1),k(!0);else{K(!1),k(!1);var t={classCode:C,courseCode:d,accessKey:j};console.log("success!"),e.successMethod(t),I.push("/view")}}}),A=Object(m.a)(B,2),F=A[0],q=A[1],M=(q.loading,q.error),V=(q.data,q.variables,function(){if(void 0==s)return"";var e=s.split("-"),t={classCode:e[0],courseCode:e[1],accessKey:e[2]};return b(e[0]),O(e[1]),N(e[2]),t});return M&&!w&&(k(!0),K(!1)),a=L?r.a.createElement("div",null,"loading..."):r.a.createElement("input",{className:"entryButton",type:"submit",value:"Submit"}),t=w?r.a.createElement("div",{className:"invalidNotification"},"Invalid course code"):r.a.createElement("div",null),r.a.createElement("div",{className:"courseEntryContainer"},r.a.createElement("div",{className:"infoTitle"},"Long Live the Lecture"),r.a.createElement("div",{className:"infoText"},"Lecshare is a lecture sharing and transcription service that allows students to revisit, search, read, and deeply understand lectures.",r.a.createElement("br",null),"Spend less time trying to write everything down and more time in the lecture."),r.a.createElement("div",{className:"courseCodeEntry"},r.a.createElement("form",{onSubmit:function(e){k(!1),e.preventDefault(),l(e.target.value);V();K(!0),F()}},r.a.createElement("input",{className:"courseTextInput",type:"text",onInput:function(e){if(l(e.target.value),void 0!=e.target.value)V()},placeholder:"Course code",name:"coursename"}),r.a.createElement("br",null),a,r.a.createElement("br",null)),t))};a(89);var g=function(){return r.a.createElement("div",{className:"headerContainer"},r.a.createElement("div",{className:"headerTitle"},"Lecshare"))},h=a(116),j=a(42),N=a(118),y=a(121),T=a(122),w=a(67),k=a.n(w),x=a(64),$=a.n(x),L=a(66),K=a.n(L),I=a(65),B=a.n(I),A=a(119),F=Object(h.a)((function(e){return{playbackButton:{},icon:{color:"black"},label:{color:"black"},valueLabel:{color:"black"},buttonContainer:{color:"black",marginBottom:"-5px",paddingTop:"5px"},loadingContainer:{marginTop:"45px"},audioContainer:{borderTop:"solid",borderWidth:"1px",borderColor:"lightgray",height:"100px",width:"100%"},controlsContainer:{width:"70%"},footer:{display:"flex",color:e.palette.text.secondary,padding:"auto",justifyContent:"center",backgroundColor:"white",position:"fixed",right:0,left:0,bottom:5,zIndex:1,marginBottom:"-5px"}}}));function q(e){var t=Math.floor(e/3600),a=Math.floor(e%3600/60),n=Math.floor(e%60);return[t,a>9?a:t?"0"+a:a||"0",n>9?n:"0"+n].filter((function(e){return e})).join(":")}var M=function(e){var t=Object(j.a)(),a=F(t),c=r.a.useState([{value:0,label:""}]),o=Object(m.a)(c,2),s=o[0],l=o[1],i=r.a.useState(100),u=Object(m.a)(i,2),d=u[0],b=u[1],v=r.a.useState(!1),f=Object(m.a)(v,2),p=f[0],E=f[1],C=r.a.useState(0),S=Object(m.a)(C,2),O=S[0],g=S[1],h=r.a.useState(!1),w=Object(m.a)(h,2),x=w[0],L=w[1],I=r.a.useState(document.getElementById("currentAudio")),M=Object(m.a)(I,2),V=M[0],D=M[1],R=r.a.useRef();Object(n.useEffect)((function(){return D(document.getElementById("currentAudio")),function(){null!=V&&(cancelAnimationFrame(R.current),V.pause(),V.load())}}),[]);var Y=function t(a){e.audioLoaded&&e.metadataLoaded&&(e.onChange&&e.onChange(W(),H()),g(W()),_(W())),R.current=requestAnimationFrame(t)},_=function(e){l([{value:0,label:q(e)},{value:V.duration,label:q(V.duration)}])},W=function(e){return Math.floor(V.currentTime)},H=function(e){return+(100*V.currentTime).toFixed()%100};null!=V&&(V.onloadedmetadata=function(){b(V.duration),_(0),V.volume=.5}),null!=V&&(V.onended=function(){E(!1),g(0)});var J=function(t){var a=parseInt(t.currentTarget.value),n=a+O;console.log(a,O,n),n>0&&n<d&&(g(n),p||(_(n),e.onChange&&e.onChange(n,0)),V.currentTime=n,g(n))};return r.a.createElement("footer",{className:a.footer},r.a.createElement(N.a,{className:a.audioContainer},e.metadataLoaded?r.a.createElement(N.a,{className:a.controlsContainer},r.a.createElement(N.a,{className:a.buttonContainer},r.a.createElement(y.a,{name:"backward",value:-10,onClick:J,disabled:O-10<0},r.a.createElement($.a,{className:a.icon})),r.a.createElement(y.a,{classes:{root:a.playbackButton},onClick:function(){var e=W();if(p){E(!1),V.pause(),cancelAnimationFrame(R.current);var t=+(100*V.currentTime).toFixed()%100;console.log(t),console.log(V.duration)}else E(!0),R.current=requestAnimationFrame(Y),V.play();_(e)}},p?r.a.createElement(B.a,{className:a.icon}):r.a.createElement(K.a,{className:a.icon})),r.a.createElement(y.a,{name:"forward",value:30,onClick:J,disabled:O+30>d},r.a.createElement(k.a,{className:a.icon}))),r.a.createElement(T.a,{value:O,onChange:function(t,a){x||(L(!0),cancelAnimationFrame(R.current)),g(a),e.onChange&&e.onChange(a,0),_(a)},onChangeCommitted:function(e,t){t&&(V.currentTime=t,p||(V.play(),E(!0))),L(!1),R.current=requestAnimationFrame(Y)},style:{color:"black"},classes:{markLabel:a.label,valueLabel:a.valueLabel},marks:s,max:d,"aria-labelledby":"continuous-slider"})):r.a.createElement("div",{className:a.loadingContainer},r.a.createElement(A.a,{color:"primary"}))))};a(91);var V=function(e){var t=e.words.map((function(t,a){return+t.startTimeSeconds==+t.endTimeSeconds&&e.currentSeconds==+t.startTimeSeconds&&e.currentNanos>+t.startTimeNano&&e.currentNanos<=+t.endTimeNano?r.a.createElement("span",{className:"word",key:a,starttimeseconds:t.startTimeSeconds,starttimenano:t.startTimeNano,endtimeseconds:t.endTimeSeconds,endtimenano:t.endTimeNano},r.a.createElement("div",{className:"highlight"},t.word,"\xa0")):e.currentSeconds+1!=+t.endTimeSeconds&&e.currentSeconds-1!=+t.startTimeSeconds||e.currentSeconds+1==+t.startTimeSeconds&&e.currentSeconds-1==+t.endTimeSeconds?r.a.createElement("span",{className:"word",key:a,starttimeseconds:t.startTimeSeconds,starttimenano:t.startTimeNano,endtimeseconds:t.endTimeSeconds,endtimenano:t.endTimeNano},t.word,"\xa0"):e.currentSeconds==+t.startTimeSeconds&&e.currentNanos>=+t.startTimeNano||e.currentSeconds==+t.endTimeSeconds&&e.currentNanos<+t.endTimeNano?r.a.createElement("span",{className:"word",key:a,starttimeseconds:t.startTimeSeconds,starttimenano:t.startTimeNano,endtimeseconds:t.endTimeSeconds,endtimenano:t.endTimeNano},r.a.createElement("div",{className:"highlight"},t.word),"\xa0"):r.a.createElement("span",{className:"word",key:a,starttimeseconds:t.startTimeSeconds,starttimenano:t.startTimeNano,endtimeseconds:t.endTimeSeconds,endtimenano:t.endTimeNano},t.word,"\xa0")}));return r.a.createElement("div",{className:"lectureContainer"},r.a.createElement("div",{className:"topSpacer"}),r.a.createElement("div",{className:"lectureText"},t),r.a.createElement("div",{className:"botSpacer"}))},D=a(120);a(92);function R(){var e=Object(b.a)(['\n    {\n        schools(code:"VIKELABS") {\n        name\n        description\n        courses {\n            name\n            classes {\n                term\n                section\n                lectures {\n                    name\n                }\n            }\n        }\n        }\n    }\n    ']);return R=function(){return e},e}var Y=function(e){var t,a,c=p()(R()),o=Object(n.useState)(!1),s=Object(m.a)(o,2),l=s[0],i=s[1],u=Object(n.useState)(!0),d=Object(m.a)(u,2),b=d[0],v=(d[1],Object(E.b)(c)),f=v.data,C=v.loading;v.error,C&&console.log("loading lecture list!"),t=f&&b?(a=f.schools[0].courses[0].classes[0].lectures).map((function(t,n){return r.a.createElement("div",{className:"lectureOption",key:n,onClick:function(){return function(t){e.updateIndex(t)}(n)}},a[n].name)})):r.a.createElement("div",{className:"lectureOption"},"Oops, no lectures");var S=function(){console.log(l),i(!l)};return l?r.a.createElement("div",null,r.a.createElement("div",{className:"sideBarContainerOpen"},r.a.createElement("div",{className:"topSpacer"}),r.a.createElement("div",{className:"expandButton",onClick:S},"hi"),r.a.createElement("div",{className:"listTitle"}),r.a.createElement("div",{className:"listCourseTitle"}),r.a.createElement("div",{className:"courseList"},t))):r.a.createElement("div",null,r.a.createElement("div",{className:"sideBarContainerClosed"},r.a.createElement("div",{className:"topSpacer"}),r.a.createElement("div",{className:"expandButton",onClick:S},"hi")))};function _(){var e=Object(b.a)(["\n    query VERIFY_CODE($crsCode: String!, $clsCode: String!, $acsKey: String!) {\n        protectedClass(courseCode: $crsCode classCode: $clsCode accessKey: $acsKey) {\n            name\n            lectures {\n                name\n                audio\n                transcription {\n                    words {\n                        word\n                        starttime\n                        endtime\n                        type\n                    }\n                }\n            }\n        } \n    }\n"]);return _=function(){return e},e}function W(){var e=Object(b.a)(["\n    query VERIFY_CODE($crsCode: String!, $clsCode: String!, $acsKey: String!) {\n        protectedClass(courseCode: $crsCode classCode: $clsCode accessKey: $acsKey) {\n            name\n        }\n    }\n"]);return W=function(){return e},e}p()(W());var H=p()(_());var J=function(e){var t,a,c=Object(n.useState)(0),o=Object(m.a)(c,2),s=o[0],l=o[1],i=Object(n.useState)(0),u=Object(m.a)(i,2),d=u[0],b=u[1],f=Object(n.useState)([]),p=Object(m.a)(f,2),C=p[0],S=p[1],O=Object(n.useState)(!0),h=Object(m.a)(O,2),j=h[0],N=h[1],y=Object(n.useState)(""),T=Object(m.a)(y,2),w=T[0],k=T[1],x=Object(n.useState)(!1),$=Object(m.a)(x,2),L=$[0],K=$[1],I=Object(n.useState)(!1),B=Object(m.a)(I,2),A=B[0],F=B[1],q=Object(n.useState)(!1),R=Object(m.a)(q,2),_=(R[0],R[1],Object(n.useState)(0)),W=Object(m.a)(_,2),J=W[0],z=W[1],G=Object(n.useState)(e.infos.courseCode),P=Object(m.a)(G,2),U=P[0],Q=(P[1],Object(n.useState)(e.infos.classCode)),X=Object(m.a)(Q,2),Z=X[0],ee=(X[1],Object(n.useState)(e.infos.accessKey)),te=Object(m.a)(ee,2),ae=te[0],ne=(te[1],Object(v.g)(),function(e,t){return null!=e?+e.split(".")[0]:t}),re=function(e,t){if(null!=e){var a=e.split(".");return 1==a[1].length?(a[1]+="0",+a[1]):+a[1]}return t},ce=Object(E.b)(H,{variables:{crsCode:U,clsCode:Z,acsKey:ae}}),oe=ce.data,se=ce.loading;return ce.error,se&&console.log("Loading!"),oe&&j&&(console.log("setting text"),S(function(e){var t=[],a=!0,n=!1,r=void 0;try{for(var c,o=e.words.entries()[Symbol.iterator]();!(a=(c=o.next()).done);a=!0){var s=Object(m.a)(c.value,2),l=(s[0],s[1]),i=void 0,u=void 0,d=void 0,b=void 0,v=void 0;if(null==l.starttime?(i=0,d=0):(i=ne(l.starttime,0),d=re(l.starttime,0)),null==l.endtime?(u=0,b=0):(u=ne(l.endtime,0),b=re(l.endtime,0)),"punctuation"!==l.type){v=l.word,l.word,l.type;var f={word:v,startTimeSeconds:i,endTimeSeconds:u,startTimeNano:d,endTimeNano:b};t.push(f)}else t[t.length-1].word=t[t.length-1].word+l.word,v=l.word}}catch(p){n=!0,r=p}finally{try{a||null==o.return||o.return()}finally{if(n)throw r}}return t}(oe.protectedClass.lectures[J].transcription)),N(!1)),oe&&""==w&&(console.log(oe.protectedClass.lectures[J].audio),k(oe.protectedClass.lectures[J].audio)),t=j?r.a.createElement("div",null,r.a.createElement("div",{className:"topSpacer"}),r.a.createElement("div",{className:"textLoading"},r.a.createElement(D.a,null))):r.a.createElement(V,{words:C,currentNanos:d,currentSeconds:s}),a=r.a.createElement(M,{onChange:function(e,t){l(e),b(t)},audioLoaded:L,metadataLoaded:A}),r.a.createElement("div",{className:"capsule"},r.a.createElement(g,null),r.a.createElement(Y,{updateIndex:function(e){k(""),K(!1),F(!1),N(!0),z(e)}}),r.a.createElement("audio",{controls:!1,src:w,id:"currentAudio",preload:"auto",onCanPlay:function(){K(!0),console.log("Audio can play!")},onLoadedMetadata:function(){F(!0),console.log("Got metadata!")}}),t,a)},z=a(39);function G(){var e=Object(b.a)(['\n    query VERIFY_CODE($courseCode: String, $classCode: String, $accessKey: String) {\n        protectedClass(courseCode:"UVIC#ECON#416" classCode: "201809#A00" accessKey: "vikelabs") {\n            name\n        }\n    }\n']);return G=function(){return e},e}p()(G());var P=function(){var e=Object(n.useState)(0),t=Object(m.a)(e,2),a=(t[0],t[1],Object(n.useState)("/")),c=Object(m.a)(a,2),o=(c[0],c[1],Object(n.useState)(!1)),s=Object(m.a)(o,2),l=s[0],i=s[1],u=Object(n.useState)(void 0),d=Object(m.a)(u,2),b=d[0],f=d[1];return r.a.createElement("div",{className:"routerContainer"},r.a.createElement(z.a,null,r.a.createElement(v.d,null,r.a.createElement(v.b,{exact:!0,path:"/"},r.a.createElement(O,{successMethod:function(e){i(!0),f(e)}})),r.a.createElement(v.b,{path:"/view",render:function(e){var t=e.location;return l?r.a.createElement(J,{infos:b}):r.a.createElement(v.a,{to:{pathname:"/",state:{from:t}}})}}))))},U=new l.a,Q=new u.a({uri:"https://dev.oimo.ca/lecshare/query/"}),X=new i.a({cache:U,link:Q}),Z=function(){return r.a.createElement("div",{className:"App"},r.a.createElement(s.Helmet,null,r.a.createElement("meta",{charSet:"utf-8"}),r.a.createElement("title",null,"Lecshare"),r.a.createElement("link",{href:"https://fonts.googleapis.com/css?family=Habibi&display=swap",rel:"stylesheet"})),r.a.createElement(d.a,{client:X},r.a.createElement(P,null)))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(r.a.createElement(Z,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[71,1,2]]]);
//# sourceMappingURL=main.7002ece8.chunk.js.map